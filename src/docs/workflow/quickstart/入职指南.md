---
date: 2021-11-23 10:00:41
author: majinhui
---
## 开发准备
1
## 开通账号
- 开通公司邮箱，下载foxmail配置邮箱，[地址](http://mail.icinfo.com.cn/extmail/cgi/index.cgi)
- 开通git账号，[地址](http://gitlab.icinfo.co/)
- 开通jira账号，[地址](http://jira.icinfo.co/)
- [wiki-前端地址](http://wiki.icinfo.co/pages/viewpage.action?pageId=10323301)

## 环境安装
|   名称   | 版本  |  备注  |
| --- |--- |--- |
| node | v0.10.28+ |  |
| nginx  | 1.18+ |  |
| vscode  | lastest |  |
| git  | lastest |  |
| foxmail  | lastest |  |
| Chrome  | lastest |  |

### VSCode

- 必要插件
  - `ESLint`
  - `Vetur`
  - `Prettier - Code formatter`
  - `path Autocomplete` 地址补全
  - `Markdown Preview Enhanced` Markdown预览
- 推荐插件
  - `stylelint`
  - `vscode-element-helper` (element-ui 专用)
  - `Debugger for Chrome` 
  - `GitLens -- Git supercharged`
   
#### sas
11
### Chrome 
- 必要插件
  - `vue-devtools`
- 推荐插件
  - `json-formatter`


## 代码风格

- 默认编码：utf-8
- 默认缩进：4个空格
- 尽可能不要分号
- 默认单引号
- 默认换行：LF
- 代码格式化：prettier

项目根目录`.vscode` > `settings.json`
```javascript
{
    "files.eol": "\n",
    "editor.codeLens": true,
    "editor.minimap.enabled": true,
    "editor.minimap.renderCharacters": false,
    "search.exclude": {
        "**/node_modules": true,
        "**/bower_components": true,
        "**/dist": true
    },
    "window.title": "${dirty}${activeEditorMedium}${separator}${rootName}",
    // 重新设定tabsize
    "editor.tabSize": 4,
    // vscode默认启用了根据文件类型自动设置tabsize的选项
    "editor.detectIndentation": false,
    "javascript.updateImportsOnFileMove.enabled": "always",
    "javascript.suggest.autoImports": false,
    //  #让prettier使用eslint的代码格式进行校验
    // "prettier.eslintIntegration": true,
    //  #去掉代码结尾的分号
    "prettier.semi": false,
    //  #使用单引号替代双引号
    "prettier.singleQuote": true,
    //  #让函数(名)和后面的括号之间加个空格
    "javascript.format.insertSpaceBeforeFunctionParenthesis": true,
    "files.associations": {
        ".env": "ignore",
        ".env.*": "ignore",
        "*.vue": "vue"
    },
    
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "[javascript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.formatOnSave": false // 交给 eslint
    },
    "[html]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.formatOnSave": true
    },

    // "[javascriptreact]": {
    //     "editor.formatOnSave": false // 交给 eslint
    // },
    "[vue]": {
        "editor.formatOnSave": true, // 交给 eslint
        //"editor.defaultFormatter": "octref.vetur"
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "vetur.format.defaultFormatterOptions": {
        "prettier": {
            // Prettier option here
            "trailingComma": "es5", // 多行时，尽可能打印尾随的逗号
            "tabWidth": 4, // 会忽略vetur的tabSize配置
            "useTabs": false, // 是否利用tab替代空格
            "semi": false, // 句尾是否加;
            "singleQuote": true, // 使用单引号而不是双引号
            "arrowParens": "avoid" // allow paren-less arrow functions 箭头函数的参数使用圆括号
        }
    },

    // #每次保存的时候自动格式化
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true
    },

    "path-autocomplete.pathMappings": {
        "@": "${folder}/src",
        "~@": "${folder}/src"
    },
    "path-autocomplete.extensionOnImport": true,
    "vetur.validation.script": false,
    "vetur.format.options.tabSize": 4,
    "vetur.format.options.useTabs": false,
    "vetur.format.defaultFormatter.html": "js-beautify-html",
    "vetur.format.defaultFormatter.js": "prettier",
    "[markdown]": {
        "editor.defaultFormatter": "mervin.markdown-formatter",
        "editor.formatOnSave": false
    },
    "[json]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    }
}
```

新建`.editorconfig`
```
root = true

[*]
charset = utf-8
indent_style = space
indent_size = 4
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true
```



## Git
### 概述

| 简称 | 全称 |
| --- | ---  |
| DEV | Development environment  |
| FAT | Feature Acceptance Test environment  |
| UAT | User Acceptance Test environment  |
| PRO | Production environment  |

- DEV 环境：用于开发者调试使用。
- FAT 环境：功能验收测试环境，用于测试环境下的软件测试者测试使用。
- UAT 环境：用户验收测试环境，用于生产环境下的软件测试者测试使用。
- PRO 环境：就是生产环境。
比如，项目域名为：http://www.abc.com，那么相关环境的域名可这样配置：
- DEV 环境：本地配置虚拟域名即可
- FAT 环境：http://fat.abc.com
- UAT 环境：http://uat.abc.com
- PRO 环境：http://www.abc.com
接下来，针对不同的环境来设计分支。


### 分支

| 简称 | 全称 | 环境 | 
| --- | ---  |---  |
| master | 主分支  | PRO |
| release | 预上线分支  | UAT |
| hotfix | 紧急修复分支  | DEV |
| develop | 测试分支  | FAT |
| feature | 需求开发分支  | DEV |

**master 分支**
master 为主分支，用于部署到正式环境（PRO），一般由 release 或 hotfix  分支合并，任何情况下不允许直接在 master 分支上修改代码。

**release 分支**
release 为预上线分支，用于部署到预上线环境（UAT），始终保持与 master 分支一致，一般由 develop 或 hotfix 分支合并，不建议直接在 release 分支上直接修改代码。
如果在 release 分支测试出问题，需要回归验证 develop 分支看否存在此问题。

**hotfix 分支**
hotfix 为紧急修复分支，命名规则为 hotfix- 开头。
当线上出现紧急问题需要马上修复时，需要基于 release 或 master 分支创建 hotfix 分支，修复完成后，再合并到 release 或 develop 分支，一旦修复上线，便将其删除。

**develop 分支**
develop 为测试分支，用于部署到测试环境（FAT），始终保持最新完成以及 bug 修复后的代码，可根据需求大小程度确定是由 feature 分支合并，还是直接在上面开发。
一定是满足测试的代码才能往上面合并或提交。

**feature 分支**
feature 为需求开发分支，命名规则为 feature- 开头，一旦该需求上线，便将其删除。


### 配置
**很重要！！！很重要！！！很重要！！！**


```bash
# 系统设置提交时转换为LF，检出时不转换
git config --global core.autocrlf input

```

### Commit 日志规范
**提交信息一定要认真填写！**

建议参考规范 `<type>: [scope]<subject>` 

比如 `feat: 登录模块-完成静态页面`、`fix: 首页模块-修复弹窗 JS Bug`

> 注意冒号后面有空格！注意冒号后面有空格！注意冒号后面有空格！

**type** 表示 动作类型，可分为：
- fix：修复 xxx Bug
- feat：新增 xxx 功能
- style：变更 xxx 代码格式或注释
- docs：变更 xxx 文档
- refactor：重构 xxx 功能或方法

**scope** 表示 影响范围，可分为：模块、类库、方法等。
**subject** 表示 简短描述，最好不要超过 60 个字，如果有相关 Bug 的 Jira 号，建议在描述中加上。


## 关于评审

### 评审中

#### 需求评审
> 提前阅读需求文档。在接到一个需求的时候，先自行仔细阅读下文档讲述的内容，把不明确的点自己列出来。

1、需求解决了什么问题？

2、初步的技术解决方案是什么？有无技术实现难点

3、开发预计时间及迭代 DeadLine

4、安全风险（恶意注册、限流、封禁、用户输入过滤等）

5、各项限制条件需求文档是否齐全（内容超长溢出的处理、没有数据的展现形式、显示条件、输入项长度限制、分片上传、断点续传等）

6、业务风险：相关法律、敏感信息是否脱敏（如果不是你来确认，请忽略）

7、明确需求的范围。哪些是这个版本要做的，哪些是要放到后面的版本才做的。

8、串通整个功能的流程，看下是否闭环

9、针对异常场景的业务规则是否完善，比如提示语

10、是否有涉及到外系统配合的


#### 设计评审
1. 样式兼容性问题：例如需要展示一个固定底部层级最高的引导栏时，需要判断页面是否有 video 标签，在 Android 中使用原生 video 标签将被浏览器劫持，导致 video 层级最高且无法更改。

2. 图片切图问题：评审的时候需要思考这个页面改如何切图，哪些图片需要2倍图哪些只需要1倍图，哪些图片需要做成雪碧图以减少请求次数。

3. 第三方库使用：如果是使用第三方 UI 库（Antd 等），设计是否按照三方库设计规范进行设计，组件使用上是否合理。


视觉相关：	

（1）一致性原则。产品的视觉和交互一致性。	

（2）优美且简约原则。保留产品最主要的信息，如果不是优先级最高，要尽一切可能避免去影响产品的简洁和美观。	

（3）环境贴切原则。使用用户能听懂的专业术语。	


交互相关：	

（4）状态可见原则。在合适的时间给用户适当的反馈，防止用户使用出现错误。	

（5）防错原则。设置防错的机制，减少用户犯错。在用户选择动作发生之前，就要防止用户容易混淆或者错误的选择。(如表单校验的动作在提交之前)	

（6）操作可控原则。对于用户的误操作，提供二次确认或者撤销的功能，提高用户的操作可控性。	

（7）容错原则。用户在使用产品过程中出现了问题，及时准确的告知用户出现问题的原因。	


体验相关：	

（8）灵活高效原则。（智能联想、历史查询等提高效率的机制）

（9）识别好过记忆。减少用户负荷，在适当的时机给用户需要获取的信息。（如页面间跳转传递参数）	

（10）人性化帮助原则。在用户需要的时候提供必要的帮助说明。


#### 接口评审
当评审完毕后，后端会进行接口设计，这个时候需要前后端进行开发讨论，讨论应用的一些开发设计、技术点、字段定义等。

#### 前端设计方案
考虑性能方面的问题	

（1）分页加载	

（2）跟后端讨论涉及到哪些接口，能否合并	

（3）复杂逻辑尽量放在后端处理。	

（4）按钮防抖


### 评审后
参加评审的同学要做会议记录：
打开钉钉-》项目-》18前端项目-》 <月份>项目 -》任务名称

![](https://tva1.sinaimg.cn/large/008i3skNly1gtqtogwlvkj60ii0gymxv02.jpg)


任务列表（**指定负责人、截止时间、预计工时**）

- xxx版本评审（完成评审后请在评论里@负责人）
  一般的评审内容格式如下
  ```
  项目类型：老项目|前后端分离|小程序
  技术选型：vue|angualr|react|jquery|微信小程序|钉钉小程序
  技术难点：-
  页面总数：20（算弹窗）
  方案设计：1/人日
  静态页面：10人/日 = 20*0.5
  联调时间：5人/日
  产品UI验收：1/人日
  总时间：17人/日 = 1 + 10 + 5 + 1
  产品：-
  开发负责人：-
  UI：-
  交付经理：-
  提测时间：-
  上线时间：-
  里程碑地址：- 
  WBS地址：-
  UI地址：xxx(如果是本地的上传到附件)
  原型地址：xxx (如果是本地的上传到附件)
  
  ```
## 开发时间评估
总时间 = 静态页面（包含数据mock） +  联调（包含自测）

公式：
静态页面 = 页面总数 * 0.5 （一般情况默认难度系数0.5,复杂页面可以设置为1、2等）
联调 = 静态页面 * 0.5

比如项目页面总数20，预估时间为15，误差控制在20%


## 周报

**模板**
```

本周任务
1、xxx模块静态页面
预计完成进度：60%
实际完成进度：60%

2、xxx模块填联调
预计完成进度：60%
实际完成进度：40%
原因：后端API文档延误

3、计划外的任务
完成情况


下周计划
1、计划1 
预计完成进度:100%

2、计划2 
预计完成进度:100%

3、x月x号xxxx项目提测或者上线
```



## 浏览器兼容
IE11、Chrome、Firefox、Safari


## 蜻蜓发布

蜻蜓发布配置个性化nginx, 点击项目终端进入shell
```
# 进入配置列表
cd /opt/nginx/conf/vhost
# 复制一个配置文件， 数字是你想设置的端口号，后面跟项目名
cp 3810-fed-template-unified-user.conf 3820-zlc-mobile.conf
# 编辑 按i开始编辑，按esc然后输入:wq保存退出
# 更改里面的端口和项目目录
vim 3820-zlc-mobile.conf
# 进入NGINX目录
cd /opt/nginx/sbin
# 验证配置文件是否正确
./nginx -t 
# 重启nginx
./nginx -s reload

```
最后访问http://192.168.1.147:你的端口, 如果需要映射外网可以找方君理申请