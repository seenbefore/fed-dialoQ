<!-- prettier-ignore-start -->
<!-- SOMETHING AUTO-GENERATED BY TOOLS - START -->
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->

- [ä»‹ç»](#ä»‹ç»)
  - [ç—›ç‚¹](#ç—›ç‚¹ "ç—›ç‚¹")
  - [vue-ts-templateæ˜¯ä»€ä¹ˆ](#vue-ts-templateæ˜¯ä»€ä¹ˆ "vue-ts-templateæ˜¯ä»€ä¹ˆ")
  - [ä¸»è¦çš„åº“](#ä¸»è¦çš„åº“ "ä¸»è¦çš„åº“")
  - [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹ "å¿«é€Ÿå¼€å§‹")
    - [åˆå§‹åŒ–åº”ç”¨](#åˆå§‹åŒ–åº”ç”¨ "åˆå§‹åŒ–åº”ç”¨")
    - [åˆ›å»º](#åˆ›å»º "åˆ›å»º")
- [ç¯å¢ƒç›¸å…³](#ç¯å¢ƒç›¸å…³ "ç¯å¢ƒç›¸å…³")
  - [Node](#node)
    - [npm](#npm)
  - [Git](#git)
    - [commitæ ¼å¼](#commitæ ¼å¼ "commitæ ¼å¼")
  - [Editor-ç¼–è¾‘å™¨](#editor-ç¼–è¾‘å™¨ "editor-ç¼–è¾‘å™¨")
    - [VsCode](#vscode)
    - [Other](#other)
- [ç¯å¢ƒå˜é‡ä½¿ç”¨è§„èŒƒ](#ç¯å¢ƒå˜é‡ä½¿ç”¨è§„èŒƒ "ç¯å¢ƒå˜é‡ä½¿ç”¨è§„èŒƒ")
  - [é…ç½®æ–‡ä»¶](#é…ç½®æ–‡ä»¶ "é…ç½®æ–‡ä»¶")
  - [è¿è¡Œæ—¶å¯ç”¨çš„ç¯å¢ƒå˜é‡](#è¿è¡Œæ—¶å¯ç”¨çš„ç¯å¢ƒå˜é‡ "è¿è¡Œæ—¶å¯ç”¨çš„ç¯å¢ƒå˜é‡")
  - [åœ¨ public/\*\*/\* ä¸­é€šè¿‡ EJS è¯­æ³•ç›´æ¥å–ç”¨](#åœ¨-public-ä¸­é€šè¿‡-ejs-è¯­æ³•ç›´æ¥å–ç”¨)
  - [åœ¨ src/\*\*/\* ä¸­é€šè¿‡ process.env å–ç”¨](#åœ¨-src-ä¸­é€šè¿‡-processenv-å–ç”¨)
  - [åœ¨ src/\*\*/\* ä¸­è¿›è¡Œæ¡ä»¶ç¼–è¯‘](#åœ¨-src-ä¸­è¿›è¡Œæ¡ä»¶ç¼–è¯‘)
- [ç»„ä»¶](#ç»„ä»¶ "ç»„ä»¶")
  - [åŸ‹ç‚¹](#åŸ‹ç‚¹)
  - [svg-icon](#svg-icon)
- [Mock](#mock)
  - [javascriptæ¨¡å¼](#javascriptæ¨¡å¼)
  - [jsonæ¨¡å¼](#jsonæ¨¡å¼)
  - [å¼•ç”¨](#å¼•ç”¨)
- [æ¨¡æ¿](#æ¨¡æ¿ "æ¨¡æ¿")
  - [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
    - [é¡¹ç›®åŸºç¡€ä¿¡æ¯](#é¡¹ç›®åŸºç¡€ä¿¡æ¯)
    - [htmlæ¨¡æ¿](#htmlæ¨¡æ¿)
    - [è·¯ç”±](#è·¯ç”±)
    - [æ‰“åŒ…](#æ‰“åŒ…)
  - [vue-template-admin é€šç”¨åå°ç®¡ç†æ¨¡æ¿](#vue-template-admin-é€šç”¨åå°ç®¡ç†æ¨¡æ¿)
    - [è·¯ç”±è®¿é—®æµç¨‹](#è·¯ç”±è®¿é—®æµç¨‹)
    - [é¡µé¢è·¯ç”±é…ç½®](#é¡µé¢è·¯ç”±é…ç½®)
    - [ç™»å½•](#ç™»å½•)
    - [èœå•é…ç½®](#èœå•é…ç½®)
    - [æ•´ä½“å¸ƒå±€é…ç½®](#æ•´ä½“å¸ƒå±€é…ç½®)
    - [å…¨å±€çŠ¶æ€ store](#å…¨å±€çŠ¶æ€-store)
      - [modules/user](#modulesuser)
  - [vue-template-homesite é€šç”¨çš„ä¼ä¸šå®˜ç½‘æ¨¡æ¿](#vue-template-homesite-é€šç”¨çš„ä¼ä¸šå®˜ç½‘æ¨¡æ¿)
  - [vue-template-mobile é€šç”¨çš„ç§»åŠ¨ç«¯æ¨¡æ¿](#vue-template-mobile-é€šç”¨çš„ç§»åŠ¨ç«¯æ¨¡æ¿)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„ "ç›®å½•ç»“æ„")
  - [å·¥ç¨‹ç›®å½•ç»“æ„](#å·¥ç¨‹ç›®å½•ç»“æ„)
  - [å­åº”ç”¨ç›®å½•ç»“æ„](#å­åº”ç”¨ç›®å½•ç»“æ„)
- [å‰ç«¯éƒ¨ç½²](#å‰ç«¯éƒ¨ç½² "å‰ç«¯éƒ¨ç½²")
  - [åç«¯æ”¯æŒè·¨åŸŸ](#åç«¯æ”¯æŒè·¨åŸŸ)
    - [æ— è™šæ‹Ÿå‰ç¼€](#æ— è™šæ‹Ÿå‰ç¼€)
    - [å¼€å¯è™šæ‹Ÿå‰ç¼€](#å¼€å¯è™šæ‹Ÿå‰ç¼€)
  
<!-- /code_chunk_output -->
<!-- SOMETHING AUTO-GENERATED BY TOOLS - END -->
<!-- prettier-ignore-end -->

# ä»‹ç»

[é¡¹ç›®åœ°å€-http://gitlab.icinfo.co/fed/vue-ts-template](http://gitlab.icinfo.co/fed/vue-ts-template) 

## ç—›ç‚¹

åœ¨å¼€å‘ä¸€ä¸ªå‰ç«¯é¡¹ç›®ä¹‹å‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åšå¦‚ä¸‹å‡†å¤‡å·¥ä½œï¼š
- æ­å»ºå¼€å‘ç¯å¢ƒ
- çº¦å®šä»£ç è§„èŒƒ
- å°è£…APIè¯·æ±‚
- é…ç½®è·¯ç”±
- å®ç°å¸ƒå±€ã€èœå•ã€å¯¼èˆª
- å®ç°ç™»å½•
- æƒé™ç®¡ç†
- ...

é™¤äº†å‡†å¤‡å·¥ä½œä¹‹å¤–ï¼Œè¿˜ä¼šé‡åˆ°å¾ˆå¤šç›¸ä¼¼çš„ä¸šåŠ¡ç±»å‹ï¼Œæ¯”å¦‚ä¸­åå°åº”ç”¨å¤§å¤šéƒ½æ˜¯å·¥ä½œå°ã€å¢åˆ æ”¹æŸ¥ã€æƒé™ã€å›¾è¡¨ç­‰ã€‚å¦‚æœæ¯æ¬¡é¡¹ç›®éƒ½å®Œå…¨æ‰‹åŠ¨å¤„ç†ä¸€éï¼Œä¸ä»…è€—è´¹æ—¶é—´ï¼Œä¹…è€Œä¹…ä¹‹å¯èƒ½ä¼šå­˜åœ¨å¤šç§æŠ€æœ¯æ ˆã€å¼€å‘è§„èŒƒï¼Œå¯¼è‡´å¼€å‘æµç¨‹ä¸ç»Ÿä¸€ï¼Œå†å²é¡¹ç›®è¶Šæ¥è¶Šéš¾ç»´æŠ¤ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œç®¡ç†å¼€å‘åˆ°éƒ¨ç½²æ•´ä¸ªæµç¨‹ã€‚

## vue-ts-templateæ˜¯ä»€ä¹ˆ

`vue-ts-template` æ˜¯ä¸€ä¸ªåŸºäºvue-cli4çš„å¤šé¡¹ç›®æ¨¡æ¿è„šæ‰‹æ¶ã€‚æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚é…ä»¥äºŒæ¬¡å°è£…çš„ä¸šåŠ¡ç»„ä»¶ï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ã€‚     

å®ƒä¸»è¦å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- ğŸš€  __å¿«é€Ÿ__ ï¼Œå†…ç½®äº†è·¯ç”±ã€å¼€å‘ã€æ„å»ºç­‰ï¼Œå¹¶ä¸”æä¾›æµ‹è¯•ã€å¸ƒå±€ã€æƒé™ã€å›½é™…åŒ–ã€çŠ¶æ€ç®¡ç†ã€APIè¯·æ±‚ã€æ•°æ®å­—å…¸ã€SvgIconç­‰æ’ä»¶ï¼Œå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†æ—¥å¸¸å¼€å‘éœ€æ±‚ã€‚  
  
- ğŸ§¨  __ç®€å•__ ï¼Œè´¯å½»â€œçº¦å®šä¼˜äºé…ç½®â€æ€æƒ³ï¼Œè®¾è®¡æ’ä»¶ä¸Šå°½å¯èƒ½ç”¨çº¦å®šæ›¿ä»£é…ç½®ï¼ŒåŒæ—¶æä¾›ç»Ÿä¸€çš„æ¨¡æ¿å…¥å£ï¼Œç®€å•ç®€æ´åˆä¸å¤±çµæ´»ã€‚æä¾›ä¸€è‡´æ€§çš„APIå…¥å£ï¼Œä¸€è‡´åŒ–çš„ä½“éªŒï¼Œä¸Šæ‰‹æ›´è½»æ¾ã€‚

- ğŸ’ª  __å¥å£®__ ï¼Œåªéœ€è¦å…³å¿ƒé¡µé¢å†…å®¹ï¼Œå‡å°‘å†™BUGçš„æœºä¼šï¼æä¾›å•å…ƒæµ‹è¯•ã€è¦†ç›–æµ‹è¯•èƒ½åŠ›ä¿éšœé¡¹ç›®è´¨é‡ã€‚

- ğŸ“¦  __å¯æ‰©å±•__ ï¼Œç›®å‰æœ‰`vue-template-admin(PCç®¡ç†ç«¯)`ã€`vue-template-homesite(PCä¼ä¸šç«¯)`ã€`vue-template-bigscreen(å¤§å±)`ã€`vue-template-mobile(h5ç§»åŠ¨ç«¯)`ç­‰å¤šç§æ¨¡æ¿

- ğŸ“¡  __é¢å‘æœªæ¥__ ï¼Œä¸ºç°ä»£æµè§ˆå™¨è½»æ¾äº§å‡ºåŸç”Ÿçš„ ES2015 ä»£ç ï¼Œæˆ–å°†ä½ çš„ Vue ç»„ä»¶æ„å»ºä¸ºåŸç”Ÿçš„ Web Components ç»„ä»¶

## ä¸»è¦çš„åº“

|   åç§°   | ç‰ˆæœ¬  |  å¤‡æ³¨  |
| --- |--- |--- |
| vue | 2.6.12 |  |
| vue-router | 3.4.9  |  |
| vuex | 3.4.9  |  |
| typescript | 4.1.5   |  |
| axios | 0.19.2    |  |
| element-ui | 2.13.2    | [æ–‡æ¡£](https://element.eleme.io/#/zh-CN/component/installation) |
| typedoc | 0.20.34   |  |
| prettier | 1.19.1    |  |
| jest | 24.9.0    | æµ‹è¯•åº“ |
| [icinfo-util](https://www.npmjs.com/package/icinfo-util) | -    | å·¥å…·ç±» [æ–‡æ¡£](https://majinhui04.github.io/icinfo-util/index.html) |
| sharegood-ui | -   | åŸºäºelement-uiå°è£…çš„PCç»„ä»¶åº“ [æ–‡æ¡£](http://sharegood-element-ui.fat1.icinfo.co/#/zh-CN/component/README) |


## å¿«é€Ÿå¼€å§‹
### åˆå§‹åŒ–åº”ç”¨
:::tip
è¯·å…ˆé…ç½®[SSH Keys](http://gitlab.icinfo.co/profile/keys)ã€‚
:::

**åˆå§‹åŒ–å·¥ä½œç©ºé—´**

```
## åˆ›å»ºé¡¹ç›®ç©ºé—´
git clone git@gitlab.icinfo.co:credit-fe/demo.git
## è¿›å…¥é¡¹ç›®
cd demo
## å…³è”æ¨¡æ¿åœ°å€
git remote add vue-ts-template git@gitlab.icinfo.co:fed/vue-ts-template.git
## å°†æ¨¡æ¿é¡¹ç›®masteråˆ†æ”¯æ‹‰åˆ°æœ¬åœ°devåˆ†æ”¯
git pull vue-ts-template master:dev
## è¿›å…¥åˆ†æ”¯
git checkout dev
```



### åˆ›å»º

`é€‰æ‹©æ–‡ä»¶ç±»å‹`

![](https://tva1.sinaimg.cn/large/008i3skNly1gq9uj6bwptj30to0c2jvt.jpg)

`é€‰æ‹©æ¨¡æ¿ç±»åˆ«`

![](https://tva1.sinaimg.cn/large/008i3skNgy1gq9ukm0delj30t80csjww.jpg)

`æ ¹æ®ä¹‹å‰åˆ›å»ºçš„é¡¹ç›®åç§°å¯åŠ¨`

```
npm run dev:demo
```

`é»˜è®¤ä¼šå¯åŠ¨æœåŠ¡æ‰“å¼€æµè§ˆå™¨`

![](https://tva1.sinaimg.cn/large/008i3skNgy1gq9uo4oaxwj31cn0u0drp.jpg)




`æ–°å»ºé¡µé¢`

![](https://tva1.sinaimg.cn/large/008i3skNly1gq9wwoo7nbj30rk0bkgpy.jpg)
![](https://tva1.sinaimg.cn/large/008i3skNly1gq9wwzmt86j30qk08wjvb.jpg)
![](https://tva1.sinaimg.cn/large/008i3skNly1gq9wx4bi45j314i0907bl.jpg)


# ç¯å¢ƒç›¸å…³

## Node

é¦–å…ˆå¾—æœ‰ [Node.js](https://nodejs.org/)ï¼Œå¹¶ç¡®ä¿ node ç‰ˆæœ¬æ˜¯ 10.13 æˆ–ä»¥ä¸Šã€‚

```bash

# æ‰“å° node ç‰ˆæœ¬ 
node -v
```

### npm
> è¯·ä½¿ç”¨`npm install`å®‰è£…ä¾èµ–ã€‚(ä¸è¦ç”¨æ·˜å®é•œåƒ)ï¼Œä¸è¦ç”¨yarnã€cnpmã€‚

```bash
# å¦‚æœæœ‰è®¾ç½®æ·˜å®é•œåƒæºï¼Œåˆ™å…ˆè¿˜åŸå›é»˜è®¤é•œåƒ
npm config set registry http://registry.npmjs.org
```
ä¸ç„¶æœ‰å¯èƒ½å‡ºç°å¦‚ä¸‹é”™è¯¯

![](https://tva1.sinaimg.cn/large/008i3skNly1gs0k0b5drqj30k00eu41b.jpg)

## Git

å…‹éš†é¡¹ç›®å‰è®¾ç½®æ¢è¡Œç¬¦

```bash
# ç³»ç»Ÿè®¾ç½®æäº¤æ—¶è½¬æ¢ä¸ºLFï¼Œæ£€å‡ºæ—¶ä¸è½¬æ¢
git config --global core.autocrlf input

```


### commitæ ¼å¼
**.vcmrc**
æ ¼å¼ `type: subject` ï¼Œæ¯”å¦‚ `feat: æ–°å¢ç™»å½•æ¨¡å—`

> æ³¨æ„å†’å·åé¢æœ‰ç©ºæ ¼ï¼æ³¨æ„å†’å·åé¢æœ‰ç©ºæ ¼ï¼æ³¨æ„å†’å·åé¢æœ‰ç©ºæ ¼ï¼

```javascript

[
    'docs', // Adds or alters documentation. ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£ï¼Œæ¯”å¦‚README, CHANGELOG, CONTRIBUTEç­‰ç­‰
    'chore', // Other changes that don't modify src or test files. æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰
    'feat', // Adds a new feature. æ–°å¢feature
    'fix', // Solves a bug. ä¿®å¤bug
    'merge', // Merge branch ? of ?.
    'perf', // Improves performance. ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ
    'refactor', // Rewrites code without feature, performance or bug changes. ä»£ç é‡æ„ï¼Œæ²¡æœ‰åŠ æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤bug
    'revert', // Reverts a previous commit. å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
    'style', // Improves formatting, white-space. ä»…ä»…ä¿®æ”¹äº†ç©ºæ ¼ã€æ ¼å¼ç¼©è¿›ã€éƒ½å¥½ç­‰ç­‰ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘
    'test', // Adds or modifies tests. æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰
]
```

## Editor-ç¼–è¾‘å™¨


### VsCode
**.vscode/settings.json**
å·²é…ç½®ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ– 

+ å¿…è¦æ’ä»¶
    - `ESLint`
    - `Vetur`
    - `Prettier - Code formatter`
    

### Other

- `tab`è½¬ç©ºæ ¼ï¼Œä¸€ä¸ª`tab`=4ä¸ªç©ºæ ¼
- æ¢è¡Œç¬¦`lf`


# ç¯å¢ƒå˜é‡ä½¿ç”¨è§„èŒƒ

## é…ç½®æ–‡ä»¶


- é…ç½®æ–‡ä»¶

  - æœ¬åœ°ç¯å¢ƒï¼š.env.development & .env.development.local
  - å¼€å‘ç¯å¢ƒï¼š.env.fat 
  - æµ‹è¯•ç¯å¢ƒï¼š.env.uat or .env.test
  - ç”Ÿäº§ç¯å¢ƒï¼š.env.production

- å˜é‡åŒåæ—¶ï¼Œä¼šè¦†ç›–å‰é¢å®šä¹‰çš„
    - .env.development.local ä¸­çš„å˜é‡ä¼˜å…ˆçº§æœ€é«˜
    - .env.development.local ä¸ä¼šè¢« git è¿½è¸ªï¼Œé€šå¸¸ç”¨äºé‡å†™é¢‘ç¹å˜åŠ¨çš„å˜é‡ï¼Œå¦‚ï¼š

    ```
    VUE_APP_MOCK = true
    VUE_APP_MOCK = false

    DEV_PROXY_TARGET_API = åç«¯å¼€å‘Açš„æ¥å£æœåŠ¡
    DEV_PROXY_TARGET_API = åç«¯å¼€å‘Bçš„æ¥å£æœåŠ¡
    DEV_PROXY_TARGET_API = åç«¯å¼€å‘Cçš„æ¥å£æœåŠ¡

    ```

## è¿è¡Œæ—¶å¯ç”¨çš„ç¯å¢ƒå˜é‡


```ts
/**
 * è¿è¡Œæ—¶å¯ç”¨çš„ï¼šprocess.env.NODE_ENVã€process.env.BASE_URLã€process.env.VUE_APP_*
 * ç¯å¢ƒåˆ¤æ–­æ¨èä½¿ç”¨ process.env.VUE_APP_ENV
 */
interface Env {
  // development:å¼€å‘ç¯å¢ƒ | production:éå¼€å‘ç¯å¢ƒ | test:è‡ªåŠ¨åŒ–æµ‹è¯•
  readonly NODE_ENV: 'development' | 'production' | 'test'

  // dev:å¼€å‘ç¯å¢ƒ | uat:æµ‹è¯•ç¯å¢ƒ | prod:ç”Ÿäº§ç¯å¢ƒ
  readonly VUE_APP_ENV: 'dev' | 'uat' | 'prod'

  // é¡µé¢éƒ¨ç½²è·¯å¾„ï¼Œè¯¦æƒ…ï¼šhttps://cli.vuejs.org/zh/config/#publicpath
  readonly BASE_URL: '' | './' | '/**/' // éœ€è¦å°¾æ–œæ ï¼Œå¦‚æ²¡æœ‰åˆ™æ„å»ºæ—¶ä¼šè‡ªåŠ¨åŠ ä¸Š

  // æ¥å£å‰ç¼€
  readonly VUE_APP_BASEURL_API: '/**/*' | 'http*(s)://**/*' // ä¸éœ€è¦å°¾æ–œæ 

  // æ˜¯å¦å¯ç”¨ mockjs
  readonly VUE_APP_MOCK: 'true' | 'false'

  // ...
}
```

## åœ¨ public/\*\*/\* ä¸­é€šè¿‡ EJS è¯­æ³•ç›´æ¥å–ç”¨

- html/htm

  ```html
  <!-- å¼•ç”¨ public ä¸­çš„èµ„æºæ—¶ä¸€å®šè¦åŠ ä¸Š BASE_URL -->
  <% if(VUE_APP_ENV === 'dev' || VUE_APP_ENV === 'stage') { %>
  <script src="<%= BASE_URL %>libs/xxx.js"></script>
  <% } else { %>
  <script src="<%= BASE_URL %>libs/xxx.min.js"></script>
  <% } %>
  ```

- js

  ```js
  var appEnv = '<%= VUE_APP_ENV %>'

  // å¯¹äºä¸æ˜ç¡®çš„å˜é‡ï¼Œä½¿ç”¨å®‰å…¨çš„å–ç”¨æ–¹å¼ï¼Œé™¤äº†å…¥å£ htmlï¼ˆå…¥å£ html ä¸å­˜åœ¨ obj å˜é‡ï¼‰
  var xxx = '<%= obj.VUE_APP_XXX || "xxx" %>'
  ```

- json
  ```json
  {
    "xxx": "<%= obj.VUE_APP_XXX || 'xxx' %>"
  }
  ```

## åœ¨ src/\*\*/\* ä¸­é€šè¿‡ process.env å–ç”¨

> æ³¨æ„ï¼šå‘½åå¿…é¡»ä»¥VUE_APP_å¼€å¤´

- vue

  ```html
  <script>
    export default {
      data() {
        return {
          xxx: process.env.VUE_APP_XXX,
          xxx2: this.$env.VUE_APP_XXX2, // é€šè¿‡ vm.$env é—´æ¥å–ç”¨ï¼ˆæ¨èï¼‰
        }
      },
    }
  </script>

  <template>
    <!-- åœ¨æ¨¡æ¿ä¸­åªèƒ½é—´æ¥å–ç”¨ -->
    <a
      download
      target="_blank"
      :href="$env.BASE_URL + 'docs/ç³»ç»Ÿæ“ä½œæŒ‡å—v1.pdf'"
    >
      ç³»ç»Ÿæ“ä½œæŒ‡å—
    </a>
  </template>
  ```

- js
  ```js
  const xxx = process.env.VUE_APP_XXX
  ```

## åœ¨ src/\*\*/\* ä¸­è¿›è¡Œæ¡ä»¶ç¼–è¯‘

å¿…é¡»æ˜¯è¿è¡Œæ—¶å¯ç”¨çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸”å˜é‡å€¼ä¸èƒ½ä¸º undefinedï¼Œå¦åˆ™æ¨¡å—å¿…å®šä¼šæ‰“åŒ…

```js
// æ­£ç¡®çš„ç”¨æ³•1
if (process.env.VUE_APP_ENV === 'dev') {
  require('xxx')
}
// æ­£ç¡®çš„ç”¨æ³•2
if (process.env.VUE_APP_ENV === 'dev' || process.env.VUE_APP_ENV === 'stage') {
  require('xxx')
}

// é”™è¯¯çš„ç”¨æ³•1
const env = process.env
if (env.VUE_APP_ENV === 'dev' || env.VUE_APP_ENV === 'stage') {
  require('xxx')
}
// é”™è¯¯çš„ç”¨æ³•2
if (this.$env.VUE_APP_ENV === 'dev' || this.$env.VUE_APP_ENV === 'stage') {
  require('xxx')
}
```


# ç»„ä»¶

## åŸ‹ç‚¹

```javascript
// å‘ä½åŸ‹ç‚¹æŒ‡ä»¤ <el-button v-stat="{ name: 'è·å–nodes' }">è·å–nodes</el-button>
Vue.directive('stat', {
    bind(el, binding) {
        el.addEventListener(
            'click',
            () => {
                const data = binding.value
                // todo å‘èµ·è¯·æ±‚
                // http.request({     
                //     url: '/mock/stat',
                //     params: {
                //         ...data,
                //     },
                // })
            },
            false,
        )
    },
})
```

## svg-icon

- å•è‰²æ¨¡å¼(é'mt-'å‰ç¼€)ï¼Œå¤§å°ç»§æ‰¿è‡³ font-sizeï¼Œé¢œè‰²ç»§æ‰¿è‡³ color
- å¤šè‰²æ¨¡å¼('mt-'å‰ç¼€)ï¼Œå¤§å°ç»§æ‰¿è‡³ font-sizeï¼Œé¢œè‰²åˆ™åŸå§‹æ˜¾ç¤º 

å°†å•è‰²`xxx.svg`ï¼Œå¤šè‰²`mt-xxx.svg`æ–‡ä»¶æ”¾å…¥`src/components/SvgIcon/icons/`

é€šè¿‡å¼•å…¥ **@/injects** å£°æ˜äº†å…¨å±€ç»„ä»¶
```ts
import Vue from 'vue'
const SvgIcon = function() {
    return import(
        /* webpackChunkName: "low-priority" */ '@/components/SvgIcon/index.vue'
    )
}
/* å…¨å±€ç»„ä»¶ Vue.component */
Vue.component('svg-icon', SvgIcon)

```

```html
<template>
    <div>
        <svg-icon icon="xxx" style="font-size:100px;"></svg-icon>
        <svg-icon icon="mt-xxx" style="font-size:100px;"></svg-icon>
    </div>
</template>  
```

# Mock
## javascriptæ¨¡å¼
åœ¨ **@/mock/modules** ä¸‹æ–°å»ºä¸€ä¸ª`åå­—éšæ„.js`åŒ¹é…`/admin/list`
```javascript
import { mock } from 'mockjs'
export default [
    {
        name: '/admin/list',
        method: 'get',
        description: 'é€‰å¡«',
        onMock(opt, query, body) {
            const { pageNum, pageSize } = query
            return mock({
                code: 0,
                data: {
                    pageNum: Number(pageNum) || 1,
                    pageSize: Number(pageSize) || 10,
                    total: 66,
                    'result|10': [
                        {
                            createDate: '@date("yyyy-MM-dd")',
                            title: '@csentence(3, 5)',
                        },
                    ],
                },
                message: 'è¯·æ±‚æç¤º',
            })
        },
    },
]

```

## jsonæ¨¡å¼
åœ¨**@/mock/data**ä¸‹æ–°å»º`login/logout.json`ï¼ŒåŒ¹é…`/login/logout`
```json
{
  "code": 200,
  "message": "message",
  "data": "data",
  "errors": [
    {
      "field": "errors_0_field",
      "info": "errors_0_info"
    },
    {
      "field": "errors_1_field",
      "info": "errors_1_info"
    },
    {
      "field": "errors_2_field",
      "info": "errors_2_info"
    }
  ]
}
```

## å¼•ç”¨
**main.ts**ä¸­å¼•å…¥
```ts
/* æ¡ä»¶ç¼–è¯‘ (å¿…é¡»æ˜¯è¿è¡Œæ—¶å¯ç”¨çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸”å˜é‡å€¼ä¸èƒ½ä¸º undefinedï¼Œå¦åˆ™æ¨¡å—å¿…å®šä¼šæ‰“åŒ…) */
if (process.env.VUE_APP_MOCK === 'true') {
    require('@/mock') // ç³»ç»Ÿå…¨å±€ä½¿ç”¨
    // require('./mock') é¡¹ç›®å†…éƒ¨ä½¿ç”¨
}
```




# æ¨¡æ¿

## é…ç½®è¯´æ˜

### é¡¹ç›®åŸºç¡€ä¿¡æ¯
**settings.js**
```javascript
module.exports = {
    mode: 'history', // è·¯ç”±æ¨¡å¼  hash or history
    key: 'vue-template-admin', // é¡¹ç›®å”¯ä¸€æ€§  è‹±æ–‡
    title: 'ç½‘ç«™æ ‡é¢˜', // æµè§ˆå™¨æ ‡é¢˜
    keywords: 'SEO å…³é”®è¯',
    description: 'PC-å¸¦æƒé™ç®¡ç†çš„åå°',
    filename: 'index.html',
}

```
### htmlæ¨¡æ¿
**index.html** é…åˆ **vue.config.js** åŠ è½½é™æ€èµ„æº

### è·¯ç”±



**meta**
|   åç§°   | å¤‡æ³¨ |
| --- |--- |
| bodyClass | æŒ‚è½½åœ¨bodyä¸Šçš„classï¼Œæ–¹ä¾¿è®¾ç½®ä¸åŒé¡µé¢bodyçš„æ ·å¼ |
| parent | çˆ¶çº§è·¯ç”±nameï¼Œæ— åˆ™ç©ºï¼Œåå°æ¨¡æ¿éœ€è®¾ç½®'Index' |
| title | è·¯ç”±æ ‡é¢˜ï¼Œä¸€èˆ¬ç”¨äºæµè§ˆå™¨æ ‡é¢˜ |
| requireAuth | æ˜¯å¦éœ€è¦ç™»å½•è®¿é—®|
| noCache | åå°æ¨¡æ¿å¼€å¯tagsViewåï¼Œä¸éœ€è¦ç¼“å­˜é¡µé¢åˆ™è®¾ä¸ºtrue |

```javascript
const AdminDashboard = () =>
    import(/* webpackChunkName: "AdminDashboard" */ './index')
export default {
    path: '/dashboard',
    name: 'AdminDashboard',
    component: AdminDashboard,
    meta: {
        bodyClass: 'Index',
        parent: 'Index',
        title: 'dashboard',
        requireAuth: true,
    },
}

```

### æ‰“åŒ… 
æ¯ä¸ªé¡¹ç›®ä¸‹æœ‰è‡ªå·±çš„**vue.config.js**




## vue-template-homesite é€šç”¨çš„ä¼ä¸šå®˜ç½‘æ¨¡æ¿
TODO
## vue-template-mobile é€šç”¨çš„ç§»åŠ¨ç«¯æ¨¡æ¿
TODO

# ç›®å½•ç»“æ„

## å·¥ç¨‹ç›®å½•ç»“æ„

```
|-- .env.development ------------ dev ç¯å¢ƒå˜é‡
|-- .env.development.local ------ dev æœ¬åœ°ç¯å¢ƒå˜é‡ (è¢« git å¿½ç•¥ï¼Œéœ€æ‰‹åŠ¨æ–°å»ºï¼Œç”¨æ¥é‡å†™éƒ¨åˆ†ç¯å¢ƒå˜é‡)
|-- .env.production ------------- prod ç¯å¢ƒå˜é‡
|-- .vscode --------------------- ç»Ÿä¸€ VSCode é…ç½®
|-- static-server.js ------------ é™æ€èµ„æºæœåŠ¡ (node è¿è¡Œ)ï¼Œé€šå¸¸ç”¨äºé¢„è§ˆ/æ£€æŸ¥æ‰“åŒ…ç»“æœï¼Œæˆ–è€…ä¸´æ—¶ç»™å…¶ä»–äººå‘˜å¯ç”¨å‰ç«¯æœåŠ¡
|-- docs ------------------------ å¼€å‘æ–‡æ¡£
|   |-- README.html ------------- ç”± ../README.md æ‰‹åŠ¨ç”Ÿæˆ (ä½¿ç”¨ VSCode æ’ä»¶ Markdown Preview Enhanced)
|   |-- xxx.md
|   |-- xxx.html
|-- public
|   |-- favicon.ico
|   |-- index.html
|   |-- libs -------------------- ä¸æ”¯æŒæ¨¡å—åŒ–åŠ è½½çš„ç¬¬ä¸‰æ–¹ ES5 ç±»åº“/æ¨¡å— (åªèƒ½é€šè¿‡å…¨å±€å˜é‡å¼•ç”¨)
|-- src
    |-- libs -------------------- æ”¯æŒæ¨¡å—åŒ–åŠ è½½ä½†æ˜¯æ— æ³•é€šè¿‡ npm å®‰è£…çš„ç¬¬ä¸‰æ–¹ ES5 ç±»åº“/æ¨¡å—
    |-- assets
    |-- styles
    |   |-- global.less
    |   |-- reset.less
    |   |-- vars.less ----------- less å…¨å±€å˜é‡/å‡½æ•° (webpack è‡ªåŠ¨æ³¨å…¥)
    |   |-- xxx.less
    |-- entry -------------------- å¤šé¡¹ç›®å…¥å£
    |   |-- x-admin ----- xåå°
    |   |-- x-homesite ----- xå®˜ç½‘
    |-- injects ----------------- vue å…¨å±€æ³¨å†Œ (æ…ç”¨)
    |   |-- index.js
    |   |-- $xxx.js
    |   |-- v-xxx.js
    |   |-- mixin-xxx.js
    |   |-- xxx.js
    |-- element-ui
    |   |-- index.js
    |   |-- rewrite ------------- ä¸»é¢˜æ ·å¼å¤å†™
    |       |-- index.less
    |       |-- xxx.less
    |-- vant
    |   |-- index.js
    |   |-- vars.less ----------- å†…ç½®å˜é‡å¤å†™
    |   |-- rewrite ------------- ä¸»é¢˜æ ·å¼å¤å†™
    |       |-- index.less
    |       |-- xxx.less
    |-- components
    |   |-- TheXxx.vue ---------- å•ä¾‹ç»„ä»¶
    |   |-- ExXxx.vue ----------- æ‰©å±•/åŒ…è£…ç¬¬ä¸‰æ–¹å¼€æºç»„ä»¶æˆ–å†…éƒ¨å…¬å…±åº“ç»„ä»¶
    |   |-- XxxXxx.vue
    |   |-- ComponentExamples --- éå•ä¾‹å…¬å…±ç»„ä»¶éœ€è¦åœ¨è¿™é‡Œå†™ç¤ºä¾‹
    |   |   |-- index.vue
    |   |   |-- XxxXxx.vue
    |   |-- SvgIcon ------------- svg-sprite å›¾æ ‡ç»„ä»¶
    |   |   |-- index.vue
    |   |   |-- icons
    |   |-- directives ---------- å¯å¤ç”¨çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆå±€éƒ¨æ³¨å†Œï¼‰
    |   |   |-- xxx.js
    |   |-- mixins -------------- å¯å¤ç”¨çš„æ··å…¥ï¼ˆå±€éƒ¨æ³¨å†Œï¼‰
    |       |-- xxx.js
```

## å­åº”ç”¨ç›®å½•ç»“æ„

```
|-- api-hooks ---------- æ¥å£å±€éƒ¨æ‹¦æˆªå™¨
|   |-- xxx.js
|-- assets ------- é¡¹ç›®å›¾ç‰‡ç­‰èµ„æº
|-- components
|   |-- global
|   |   |-- my-dialog
|   |   |   |-- index.vue ------- é¡¹ç›®å…¬å…±ç»„ä»¶ï¼Œé¡µé¢å¯ç›´æ¥ä½¿ç”¨
|   |-- ExXxx.vue ----------- æ‰©å±•/åŒ…è£…ç¬¬ä¸‰æ–¹å¼€æºç»„ä»¶æˆ–å†…éƒ¨å…¬å…±åº“ç»„ä»¶
|-- config ------- é¡¹ç›®ç¯å¢ƒå‚æ•°é…ç½®
|-- mock
|   |-- data ------- è‡ªåŠ¨ç”Ÿæˆmockæ•°æ®
|   |-- modules  ------- è‡ªå®šä¹‰mockæ•°æ®
|-- router
|   |   |-- index.js
|   |   |-- routes.js
|   |   |-- registerInterceptor.js
|-- scripts
|   |   |-- utils --------------- é€šç”¨æ–¹æ³•
|   |   |-- constants ----------- å¸¸é‡ (å¤šä½¿ç”¨ Object.freeze)
|   |   |-- eventBus ------------ äº‹ä»¶æ€»çº¿
|   |   |-- http ------------ axioså®ä¾‹
|-- services ------ APIå‡½æ•°
|-- store ------ æ•°æ®å­˜å‚¨
|-- styles
|   |   |-- vars.less ----------- less å…¨å±€å˜é‡/å‡½æ•° (webpack è‡ªåŠ¨æ³¨å…¥)
|-- views
|   |-- xxx ----------------- é™¤äº† api å’Œ vuexï¼Œå…¶å®ƒçš„ä¸“å±æ¨¡å—è¦å†…èšåœ¨åŒä¸€ç›®å½•ä¸‹
|       |-- index.vue  --------- é¡µé¢
|       |-- router.js --------- è·¯ç”±
|       |-- components ------ å­˜æ”¾ç§æœ‰ç»„ä»¶
|       |-- assets ------ å›¾ç‰‡ç­‰èµ„æº
|-- api-generator.js --------- è‡ªåŠ¨ç”ŸæˆAPIçš„å‘½ä»¤
|-- App.vue
|-- index.html --------- é¡¹ç›®å…¥å£æ¨¡æ¿
|-- main.ts --------- é¡¹ç›®å…¥å£
|-- style.less --------- é¡¹ç›®css
|-- vue.config.js --------- é¡¹ç›®æ‰“åŒ…é…ç½®
 
```

# å‰ç«¯éƒ¨ç½²

> nginx aliasæ¨¡å¼éœ€è¦é‡å®šå‘ 

## åç«¯æ”¯æŒè·¨åŸŸ

### æ— è™šæ‹Ÿå‰ç¼€
**.env.production**
```bash
NODE_ENV = production
VUE_APP_ENV = prod
# æ˜¯å¦ä½¿ç”¨gzip
VUE_APP_GZIP = false
# åç«¯æœåŠ¡åœ°å€
VUE_APP_BASEURL_API = http://x.x.x.x:19999
VUE_APP_MOCK = false
# è™šæ‹Ÿè·¯å¾„
BASE_URL = '/'
# èµ„æºåœ°å€
outputDir = 'fed-data-quality-dist'
```

**nginx**

```
server {
    # è¿ç»´é…ç½®
    listen       4800;

    location / {
        root  /opt/fed-data-quality-dist;
        index  index.html;
        try_files $uri $uri/ /index.html;
    }
}
```

è®¿é—®ï¼šhttp://59.202.42.163:480


### å¼€å¯è™šæ‹Ÿå‰ç¼€

**.env.production**
```bash
NODE_ENV = production
VUE_APP_ENV = prod
# æ˜¯å¦ä½¿ç”¨gzip
VUE_APP_GZIP = false
# åç«¯æœåŠ¡åœ°å€
VUE_APP_BASEURL_API = http://x.x.x.x:19999
VUE_APP_MOCK = false
# è™šæ‹Ÿè·¯å¾„
BASE_URL = '/fed-data-quality/'
# èµ„æºåœ°å€
outputDir = 'fed-data-quality-dist'
```

**nginx**

```
server {
    # è¿ç»´é…ç½®
    listen       4800;
    location = /fed-data-quality {
        rewrite ^ http://59.202.42.163:480/fed-data-quality/;
    }

    location /fed-data-quality {
        alias  /opt/fed-data-quality-dist;
        index  index.html;
        try_files $uri $uri/ /opt/data-quality_html/index.html;
        
        # é¦–é¡µç¦æ­¢ç¼“å­˜
        if ($request_filename ~ .*\.(htm|html)$) {
            add_header Cache-Control "no-cache,no-store";
        } 
        # é™æ€èµ„æºé»˜è®¤ç¼“å­˜14å¤©
        if ($request_filename ~ .*\.(js|css|png|jpg)$) {
            expires 336h;
        } 
    }
}
```

è®¿é—®ï¼šhttp://59.202.42.163:480/fed-data-quality









