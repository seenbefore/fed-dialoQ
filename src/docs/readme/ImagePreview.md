# 文档## 介绍参考 [ElementUi](https://element.eleme.cn/#/zh-CN/component/color) 的 `el-image` 实现## 使用组件方式### 组件入参介绍- `url`：图片的URL，支持字符串或者字符串数组。如果是数组，并且长度大于1，则可以左右切换。- `appendToBody`：是否将弹出层放置于 `body` 内，默认为 `true`。注意：__如果使用的是函数式掉用或者指令方式，则一定会挂载在body上的。__- `loop`：是否可以循环切换，默认为 `true`。注意：__如果url传递的是字符串，则不会生效。__- `closeOnClickModal`：是否可以点击遮罩关闭弹框。默认为：`true`__### 引入/注册组件```javascript<script lang="ts">import ImagePreview from 'xxx/image-preview/index.vue'// .......    @Component({    name: 'xxx',    components: {        // 注册组件        ImagePreview,    }})export default class xxx extends Vue {    @Ref('imagePreviewRef')    public imagePreviewRef!: ImagePreview        /* 打开预览的弹框 */    public open(): void {        this.imagePreviewRef.open()        }}</script><template>    <div class="xxx">        <!-- 使用组件：直接传递url -->        <ImagePreview ref="iamgePreviewRef" url="http://www.baidu.com.jpg" :appendToBody="true"/>        <!-- 支持传递url数组，多个url可以左右切换 -->        <ImagePreview ref="iamgePreviewRef" :url="['http://www.baidu.com.jpg', 'http://www.baidu.com.1.jpg']" :loop="true"/>    </div></template>```## 函数式调用### 入参介绍- `url`：图片的URL，支持字符串或者字符串数组。如果是数组，并且长度大于1，则可以左右切换- `options`：IOptions```javascriptexport interface IOptions {    /* 是否能循环切换 */    loop?: boolean    /* 是否通过点击遮罩关闭弹框 */    closeOnClickModal?: boolean}```__注意导入的路径不能直接写非http链接的路径，否者打包的时候无法识别该依赖，最终打包不会将图片打包进去。可以参考下面的写法__```javascriptconst img = require('xxx/a.jpg')useImagePreview(img).then(() => {    // xxx})```### 使用介绍```javascriptimport { useImagePreview } from 'xxx/image-preview/hooks/useImagePreview.ts'// .....export default class xxx extends Vue {    public open(): void {        useImagePreview('http://www.baidu.com.jpg').then(() => {            /* 弹框关闭的时候触发的回掉 */        }        useImagePreview(['http://www.baidu.com.jpg', 'http://www.baidu.com1.jpg'], { loop: true }).then(() => {            /* 弹框关闭的时候触发的回掉 */        }    }}```## 指令方式掉用### 指令注册```javascript/* 导入指令 */import ImagePreviewDirective from 'xxx/image-preview/directive/index.ts'/* 注册指令 */Vue.use(ImagePreviewDirective)```### 指令使用#### 在img标签上使用```javascript// .....<template>    <div class="xxx">        <!-- 图片在点击的时候会自动打开大图预览功能 -->        <img v-image-preview src="./assets/img/a.png" />        <!-- 支持自定义放大的图片url，这个时候打开的大图则会是 http://www.baidu.com.jpg -->        <img v-image-preview="http://www.baidu.com.jpg" src="./assets/img/a.png" />        <!-- 自定义放大的图片url支持数组。 -->        <img v-image-preview="['http://www.baidu.com.jpg', 'http://www.baidu.com.2.jpg']" src="./assets/img/a.png" />    </div></template>```### 在非img标签上使用__当在非img标签上使用的时候，会通过 `querySelectorAll` 去获取所有的img标签的src。并且内部通过 `useImagePreview` 方法去加载大图预览。如果img标签是动态加载的，内部会通过 `MutationObserver` 去监听，不支持该api，则会做降级处理，直接获取img标签，不会去捕获动态的img标签。注意：暂时只是点击某个预览某个图片。__```javascript<template>    <div v-image-preview class="xxx">        <!-- 图片在点击的时候会自动打开大图预览功能，等价于 useImagePreview(['./assets/img/a.png', './assets/img/b.png', './assets/img/c.png', './assets/img/f.png']) -->        <img src="./assets/img/a.png" />        <img src="./assets/img/b.png" />        <img src="./assets/img/c.png" />        <div>            <img src="./assets/img/f.png" />        </div>    </div>        <!-- 支持el-image上使用 -->    <el-image v-image-preview src="xxx/a.jpg"></el-image></template>```